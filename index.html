<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Diary c·ªßa Ch√≠p</title>

<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#ffe6f0;
  font-family:'Patrick Hand', cursive;
}

.app{
  width:100vw;
  height:100vh;
  position:relative;
  overflow:hidden;
}

/* ===== HEADER ===== */
.header{
  padding:20px 32px;
  font-size:36px;
  color:#ff4d94;
}

/* ===== GRID ===== */
.grid{
  padding:0 32px 32px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:24px;
  transition:.4s;
}

.card{
  height:180px;
  background:white;
  border-radius:20px;
  box-shadow:0 10px 25px rgba(255,105,180,.25);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  cursor:pointer;
  transition:.25s;
}
.card:hover{transform:translateY(-6px)}

.card.add{
  font-size:40px;
  color:#ff4d94;
}

/* ===== DETAIL ===== */
.detail{
  position:absolute;
  inset:0;
  background:#fff;
  padding:32px;
  opacity:0;
  transform:scale(.92);
  pointer-events:none;
  transition:.4s;
}
.detail.active{
  opacity:1;
  transform:scale(1);
  pointer-events:auto;
}

.back{
  background:none;
  border:none;
  font-size:22px;
  color:#ff4d94;
  cursor:pointer;
}

/* ===== FORM ===== */
input,textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:2px solid #ffd1e8;
  font-family:inherit;
  font-size:18px;
}

textarea{min-height:100px;resize:none}

/* ===== IMAGE ===== */
.images{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-top:12px;
}

.images img{
  width:100px;
  height:100px;
  object-fit:cover;
  border-radius:14px;
  box-shadow:0 5px 15px rgba(0,0,0,.15);
}

/* ===== CUTE BUTTON ===== */
.upload-btn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 18px;
  border-radius:999px;
  background:#ff4d94;
  color:white;
  font-size:18px;
  cursor:pointer;
  margin-top:8px;
  box-shadow:0 6px 15px rgba(255,77,148,.35);
  transition:.2s;
}
.upload-btn:hover{
  transform:scale(1.05);
  background:#ff2f84;
}

.upload-btn span{
  font-size:22px;
}

input[type="file"]{
  display:none;
}
</style>
</head>

<body>
<div class="app">

  <div class="header">üìñ Diary c·ªßa Ch√≠p</div>

  <div class="grid" id="grid"></div>

  <div class="detail" id="detail">
    <button class="back">‚Üê Back</button>

    <h2>Ti√™u ƒë·ªÅ</h2>
    <input id="titleInput">

    <h2>Note</h2>
    <textarea id="noteInput"></textarea>

    <h2>·∫¢nh</h2>

    <label class="upload-btn">
      <span>üì∑</span> Th√™m ·∫£nh
      <input type="file" id="imageInput" accept="image/*" multiple>
    </label>

    <div class="images" id="images"></div>
  </div>

</div>

<script>
const grid = document.getElementById("grid")
const detail = document.getElementById("detail")
const titleInput = document.getElementById("titleInput")
const noteInput = document.getElementById("noteInput")
const imageInput = document.getElementById("imageInput")
const imagesBox = document.getElementById("images")
const backBtn = document.querySelector(".back")

let data = JSON.parse(localStorage.getItem("diary-chip")) || []
let currentId = null

function save(){
  localStorage.setItem("diary-chip",JSON.stringify(data))
}

function renderGrid(){
  grid.innerHTML=""

  data.forEach(card=>{
    const div=document.createElement("div")
    div.className="card"
    div.textContent=card.title
    div.onclick=()=>openDetail(card.id)
    grid.appendChild(div)
  })

  const add=document.createElement("div")
  add.className="card add"
  add.textContent="+"
  add.onclick=createCard
  grid.appendChild(add)
}

function createCard(){
  const id=Date.now()
  data.push({id,title:"New Note",note:"",images:[]})
  save()
  renderGrid()
}

function openDetail(id){
  currentId=id
  const card=data.find(c=>c.id===id)

  titleInput.value=card.title
  noteInput.value=card.note
  renderImages(card.images)

  grid.style.opacity=0
  detail.classList.add("active")
}

function renderImages(list){
  imagesBox.innerHTML=""
  list.forEach(src=>{
    const img=document.createElement("img")
    img.src=src
    imagesBox.appendChild(img)
  })
}

titleInput.oninput=()=>{
  const card=data.find(c=>c.id===currentId)
  card.title=titleInput.value
  save()
  renderGrid()
}

noteInput.oninput=()=>{
  const card=data.find(c=>c.id===currentId)
  card.note=noteInput.value
  save()
}

imageInput.onchange=()=>{
  const card=data.find(c=>c.id===currentId)
  Array.from(imageInput.files).forEach(file=>{
    const reader=new FileReader()
    reader.onload=e=>{
      card.images.push(e.target.result)
      save()
      renderImages(card.images)
    }
    reader.readAsDataURL(file)
  })
  imageInput.value=""
}

backBtn.onclick=()=>{
  detail.classList.remove("active")
  grid.style.opacity=1
}

renderGrid()
</script>
</body>
</html>
